---
title: Next.js i18n
description: A guide on how to use Next.js i18n
date: '2022-03-23'
dateUpdated: '2022-03-23'
bannerId: 1hRWtyM5wqNlpkKghyYbRJ
bannerDescription: cozy environment
tags: ['react', 'tech', 'next.js']
keywords: ['nextjs environment variables', 'nextjs api key']
published: true
---

## Introduction

### Initialize a NextJS project

[link](https://nextjs.org/docs/api-reference/create-next-app)

### Remove boilerplate code

```jsx fileName=pages/index
export default function Home() {
  return <main>Hello world</main>;
}
```

Commit message

### Create another route/page

This step is optional. It will allow better demo

```jsx fileName=pages/index
import { useRouter } from "next/router";

export default function Home() {
  const { locale } = useRouter();

  return <main>Hello world: {locale}</main>;
}
```

```jsx fileName=pages/about
import { useRouter } from "next/router";

export default function About() {
  const { locale } = useRouter();

  return <main>About page: {locale}</main>;
}
```


<Img width={680} height={635} src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8fvgs0o141eglfmwoic5.png" />

### Add built-in NextJS i18n configuration

```js
const nextConfig = {
  // other stuff
  i18n: {
    defaultLocale: "en",
    locales: ["en", "sv", "zh-CN"],
  },
};
```

# Images of auto-created routes for home page
<Img width={680} height={564} src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ze3r6h54doxu0tc097ke.png" />

# Images of auto-created routes for about page
<Img width={680} height={559} src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ww0xto6xf2zj41esnt4u.png" />


# Not found page if not included in array of locales
<Img width={680} height={432} src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/v93dzxk9p8f3dpdcgu0u.png" />


### Create a header component 

#### Navigation links

#### Changing of locale

```jsx fileName=components/Header
import React from "react";
import Link from "next/link";
import { useRouter } from "next/router";

const Header = () => {
  const router = useRouter();

  const handleLocaleChange = (event) => {
    const value = event.target.value;

    router.push(router.route, router.asPath, {
      locale: value,
    });
  };

  return (
    <header>
      <nav>
        <Link href="/">
          <a className={router.asPath === "/" ? "active" : ""}>Home</a>
        </Link>
        <Link href="/about">
          <a className={router.asPath === "/about" ? "active" : ""}>About</a>
        </Link>
      </nav>

      <select onChange={handleLocaleChange} value={router.locale}>
        <option value="en">üá∫üá∏ English</option>
        <option value="zh-CN">üá®üá≥ ‰∏≠Êñá</option>
        <option value="sv">üá∏üá™ Swedish</option>
      </select>

      <style jsx>{`
        a {
          margin-right: 0.5rem;
        }

        a.active {
          color: blue;
        }

        nav {
          margin-bottom: 0.5rem;
        }
      `}</style>
    </header>
  );
};

export default Header;
```

```jsx fileName=pages/_app
import Header from "../components/Header";
import "../styles/globals.css";

function MyApp({ Component, pageProps }) {
  return (
    <>
      <Header />
      <Component {...pageProps} />
    </>
  );
}

export default MyApp;
```

<Img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/6clh33761tlx7wit99vx.gif" width={500} height={250}/>

### Install next-i18next

```sh
npm install next-i18next
```

### Create a `next-i18next.config.js` and update `next.config.js`


```js fileName=next-i18next.config
module.exports = {
  i18n: {
    defaultLocale: "en",
    locales: ["en", "sv", "zh-CN"],
    localePath: "./locales",
  },
};
```

`localePath` is optional and will default to `./public/locales`.

```js
const { i18n } = require("./next-i18next.config");

const nextConfig = {
  // other stuff
  i18n,
};

module.exports = nextConfig;
```

### Create translation files

#### English Translations
```json fileName=locales/en/home.json
{
  "home": "Home",
  "about": "About"
}
```

```json fileName=locales/en/common.json
{
  "greeting": "Hello world!"
}
```

#### Swedish translations

```json fileName=locales/sv/home.json
{
  "home": "Hem",
  "about": "Om"
}
```

```json fileName=locales/sv/common.json
{
  "greeting": "Hej v√§rlden!"
}
```

#### Chinese translations

```json fileName=locales/zh-CN/home.json
{
  "home": "‰∏ªÈ°µ",
  "about": "ÂÖ≥‰∫éÈ°µÈù¢"
}
```

```json fileName=locales/zh-CN/common.json
{
  "greeting": "‰∏ñÁïåÊÇ®Â•Ω"
}
```

### There are three functions that next-i18next exports, which you will need to use to translate your project:


#### `appWithTranslation`

```jsx fileName=pages/_app
import { appWithTranslation } from "next-i18next";
import Header from "../components/Header";
import "../styles/globals.css";

function MyApp({ Component, pageProps }) {
  return (
    <>
      <Header />
      <Component {...pageProps} />
    </>
  );
}

export default appWithTranslation(MyApp);
```

#### `serverSideTranslations`

```jsx fileName=pages/index
import { serverSideTranslations } from "next-i18next/serverSideTranslations";

// export default function Home...

export async function getStaticProps({ locale }) {
  return {
    props: {
      ...(await serverSideTranslations(locale, ["common", "home"])),
      // Will be passed to the page component as props
    },
  };
}
```

#### `useTranslation`

```jsx fileName=pages/index
// other imports
import { useTranslation } from "next-i18next";

export default function Home() {
  // We want to get the translations from `home.json`
  const { t } = useTranslation("home");

  // Get the translation for `greeting` key
  return <main>{t("greeting")}</main>;
}

// export async function getStaticProps...
```

```jsx fileName=components/Header
// other imports
import { useTranslation } from "next-i18next";

const Header = () => {
  // ...

  // If no argument is passed, it will use `common.json`
  const { t } = useTranslation();

  return (
    <header>
      <nav>
        <Link href="/">
          <a className={router.asPath === "/" ? "active" : ""}>{t("home")}</a>
        </Link>
        <Link href="/about">
          <a className={router.asPath === "/about" ? "active" : ""}>
            {t("about")}
          </a>
        </Link>
      </nav>
      {/* Other code */}
    </header>
  );
}
```

<Img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/94h6kl9kdj9stl7qya8v.gif" width={500} height={250}/>

The `home` page is translated properly; however, the `about` page is not. It is because we need to use `serverSideTranslations` in every route.


```jsx
// other imports
import { serverSideTranslations } from "next-i18next/serverSideTranslations";

// export default function About...

export async function getStaticProps({ locale }) {
  return {
    props: {
      ...(await serverSideTranslations(locale, ["common"])),
    },
  };
}
```

<Img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/m1r3a9cbrrwirq71vxhh.gif" width={600} height={250}/>

We only specified `common` in the `serverSideTranslations` because we don't plan on using anything in `home.json` in the About page.

<br />

I will fetch the translations of the About page from the backend. But before that, let's first check some cool stuff we can do with the `i18n-next` library.

### Nested translation keys and default translations

```json fileName=locales/en/newsletter
{
  "title": "Stay up to date",
  "subtitle": "Subscribe to my newsletter",
  "form": {
    "firstName": "First name",
    "email": "E-mail",
    "action": {
      "signUp": "Sign Up",
      "cancel": "Cancel"
    }
  }
}
```

```json fileName=locales/zh-CN/newsletter
{
  "title": "‰øùÊåÅÊúÄÊñ∞Áä∂ÊÄÅ",
  "form": {
    "email": "ÁîµÂ≠êÈÇÆÁÆ±",
    "action": {
      "cancel": "ÂèñÊ∂à"
    }
  }
}
```

```jsx fileName=components/SubscribeForm
import { useTranslation } from "next-i18next";
import React from "react";

const SubscribeForm = () => {
  const { t } = useTranslation("newsletter");

  return (
    <section>
      <h3>{t("title")}</h3>
      <h4>{t("subtitle")}</h4>

      <form>
        <input placeholder={t("form.firstName")} />
        <input placeholder={t("form.email")} />
        <button>{t("form.action.signUp")}</button>
        <button>{t("form.action.cancel")}</button>
      </form>
      <style jsx>{`
        form {
          max-width: 300px;
          display: flex;
          flex-direction: column;
        }

        input {
          margin-bottom: 0.5rem;
        }
      `}</style>
    </section>
  );
};

export default SubscribeForm;
```

Render the form in `pages/index.jsx` and add `newsletter` in `serverSideTranslations`.

```jsx fileName=pages/index
import { serverSideTranslations } from "next-i18next/serverSideTranslations";
import { useTranslation } from "next-i18next";
import SubscribeForm from "../components/SubscribeForm";

export default function Home() {
  const { t } = useTranslation("home");

  return (
    <main>
      <div>{t("greeting")}</div>
      {/* Render the form here */}
      <SubscribeForm />
    </main>
  );
}

export async function getStaticProps({ locale }) {
  return {
    props: {
      ...(await serverSideTranslations(locale, [
        "common",
        "home",
        "newsletter", // Add newsletter translations
      ])),
    },
  };
}
```

<Img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1amjqh6qvtpy6rfyudmp.gif" width={600} height={514}/>


### Built-in Formats

- Number
- Currency
- DateTime
- RelativeTime
- List


```json fileName=locales/en/built-in-demo
{
  "number": "Number: {{val, number}}",
  "currency": "Currency: {{val, currency}}",
  "dateTime": "Date/Time: {{val, datetime}}",
  "relativeTime": "Relative Time: {{val, relativetime}}",
  "list": "List: {{val, list}}",
  "weekdays": {
    "monday": "Monday",
    "tuesday": "Tuesday",
    "wednesday": "Wednesday",
    "thursday": "Thursday",
    "friday": "Friday"
  }
}
```

```json fileName=locales/zh-CN/built-in-demo
{
  "number": "Êï∞: {{val, number}}",
  "currency": "Ë¥ßÂ∏Å: {{val, currency}}",
  "dateTime": "Êó•Êúü/Êó∂Èó¥: {{val, datetime}}",
  "relativeTime": "Áõ∏ÂØπÊó∂Èó¥: {{val, relativetime}}",
  "list": "ÂàóË°®: {{val, list}}",
  "weekdays": {
    "monday": "ÊòüÊúü‰∏Ä",
    "tuesday": "ÊòüÊúü‰∫å",
    "wednesday": "ÊòüÊúü‰∏â",
    "thursday": "ÊòüÊúüÂõõ",
    "friday": "ÊòüÊúü‰∫î"
  }
}
```

```json fileName=locales/sv/built-in-demo
{
  "number": "Nummer: {{val, number}}",
  "currency": "Valuta: {{val, currency}}",
  "dateTime": "Datum/tid: {{val, datetime}}",
  "relativeTime": "Relativ tid: {{val, relativetime}}",
  "list": "Lista: {{val, list}}",
  "weekdays": {
    "monday": "M√•ndag",
    "tuesday": "Tisdag",
    "wednesday": "Onsdag",
    "thursday": "Torsdag",
    "friday": "Fredag"
  }
}
```

```jsx
import { useTranslation } from "next-i18next";
import React from "react";

const BuiltInFormatsDemo = () => {
  const { t } = useTranslation("built-in-demo");

  return (
    <div>
      <p>
        {/* "number": "Number: {{val, number}}", */}
        {t("number", {
          val: 123456789.0123,
        })}
      </p>
      <p>
        {/* "currency": "Currency: {{val, currency}}", */}
        {t("currency", {
          val: 123456789.0123,
          style: "currency",
          currency: "USD",
        })}
      </p>

      <p>
        {/* "dateTime": "Date/Time: {{val, datetime}}", */}
        {t("dateTime", {
          val: new Date(1234567890123),
          formatParams: {
            val: {
              weekday: "long",
              year: "numeric",
              month: "long",
              day: "numeric",
            },
          },
        })}
      </p>

      <p>
        {/* "relativeTime": "Relative Time: {{val, relativetime}}", */}
        {t("relativeTime", {
          val: 12,
          style: "long",
        })}
      </p>

      <p>
        {/* "list": "List: {{val, list}}", */}
        {t("list", {
          val: [
            t("weekdays.monday"),
            t("weekdays.tuesday"),
            t("weekdays.wednesday"),
            t("weekdays.thursday"),
            t("weekdays.friday"),
          ],
        })}
      </p>
    </div>
  );
};

export default BuiltInFormatsDemo;
```


<Img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ojfg949500yj9ystfyyc.gif" width={502} height={468}/>

I created a simple endpoint to fetch the content of the about page

`https://next-i18n-example-cg.vercel.app/api/about`

```js fileName=pages/api/about
export default function handler(req, res) {
  const lang = req.query.lang || "en";

  if (lang === "sv") {
    return res.status(200).json({ message: "Jag √§r Code Gino" });
  } else if (lang === "zh-CN") {
    return res.status(200).json({ message: "ÊàëÊòØ‰ª£Á†ÅÂêâËØ∫" });
  } else {
    return res.status(200).json({ message: "I am Code Gino" });
  }
}
```

```jsx fileName=pages/about
import { serverSideTranslations } from "next-i18next/serverSideTranslations";

export default function About({ message }) {
  return <h1>{message}</h1>;
}

export async function getStaticProps({ locale }) {
  const { message } = await fetch(
    // forward the locale value to the server via query params
    `https://next-i18n-example-cg.vercel.app/api/about?lang=${locale}`
  ).then((res) => res.json());

  return {
    props: {
      message,
      ...(await serverSideTranslations(locale, ["common"])),
    },
  };
}
```

<Img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qiqwndvaoxogaghs1jmw.gif" width={500} height={300}/>